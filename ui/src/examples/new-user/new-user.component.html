<div class="main-content">
  <div class="container-fluid">
    <div class="card">
      <div class="card-header softies-color">
          <h4 class="title">Nuevo Usuario</h4>
      </div>
      <div class="card-content">
        <form novalidate [formGroup]="formGroup" (ngSubmit)="addUser()">
          <div class="row">
            <fieldset class="col-md-6">
              <div class="form-group">
                <label>Nombre</label>
                <input type="text"
                       class="form-control"
                       formControlName="name"
                       [formGroup]="formGroup"
                       placeholder="Nombre"
                       [(ngModel)]="newUser.name"
                       required>
                <div class="form-control-feedback"
                     *ngIf="formGroup.controls.name.errors && (formGroup.controls.name.dirty || formGroup.controls.name.touched)">
                  <p *ngIf="formGroup.controls.name.errors.required">Es requerido</p>
                </div>
              </div>
            </fieldset>

            <fieldset class="col-md-6">
              <div class="form-group">
                <label>Apellido</label>
                <input type="text"
                       class="form-control"
                       formControlName="lastName"
                       [formGroup]="formGroup"
                       placeholder="Apellido"
                       [(ngModel)]="newUser.lastName"
                       required>
                <div class="form-control-feedback"
                     *ngIf="formGroup.controls.lastName.errors && (formGroup.controls.lastName.dirty || formGroup.controls.lastName.touched)">
                  <p *ngIf="formGroup.controls.lastName.errors.required">Es requerido</p>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="row">
            <fieldset class="col-md-6">
              <div class="form-group">
                <label>Usuario</label>
                <input type="text"
                       class="form-control"
                       formControlName="username"
                       [formGroup]="formGroup"
                       placeholder="Usuario"
                       [(ngModel)]="newUser.username"
                       required>
                <div class="form-control-feedback"
                     *ngIf="formGroup.controls.username.errors && (formGroup.controls.username.dirty || formGroup.controls.username.touched)">
                  <p *ngIf="formGroup.controls.username.errors.required">Es requerido</p>
                </div>
              </div>
            </fieldset>

            <fieldset class="col-md-6">
              <div class="form-group">
                <label>Mail</label>
                <input type="email"
                       class="form-control"
                       formControlName="email"
                       [formGroup]="formGroup"
                       placeholder="Mail"
                       [(ngModel)]="newUser.email"
                       required>
                <div class="form-control-feedback" *ngIf="formGroup.controls.email.errors && (formGroup.controls.email.dirty || formGroup.controls.email.touched)">
                  <p *ngIf="formGroup.controls.email.errors.required">Es requerido</p>
                  <p *ngIf="formGroup.controls.email.errors.email">Mail Inválido</p>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="row">
            <fieldset class="col-md-6">
              <div class="form-group">
                <label>Contraseña</label>
                <input type="password"
                       class="form-control"
                       formControlName="password"
                       [formGroup]="formGroup"
                       placeholder="Contraseña"
                       [(ngModel)]="newUser.password"
                       required>
                <div class="form-control-feedback"
                     *ngIf="formGroup.controls.password.errors && (formGroup.controls.password.dirty || formGroup.controls.password.touched)">
                  <p *ngIf="formGroup.controls.password.errors.required">Es requerido</p>
                  <p *ngIf="formGroup.controls.password.errors.minlength">Minimo de 8 caracteres</p>
                </div>
              </div>
            </fieldset>
            <fieldset class="col-md-6">
              <div class="form-group">
                <label>Confirmar contraseña</label>
                <input type="password"
                       class="form-control"
                       formControlName="confirmPassword"
                       [formGroup]="formGroup"
                       placeholder="Contraseña"
                       required>
                <div class="form-control-feedback"
                     *ngIf="formGroup.controls.confirmPassword.errors && (formGroup.controls.confirmPassword.dirty || formGroup.controls.confirmPassword.touched)">
                  <p *ngIf="formGroup.controls.confirmPassword.errors.required">Es requerido</p>
                  <p *ngIf="formGroup.controls.confirmPassword.errors.minlength">Mínimo de 8 caracteres</p>
                  <p *ngIf="formGroup.controls.confirmPassword.errors?.MatchPassword">Las contraseñas no coinciden.</p>
                </div>
              </div>
            </fieldset>
          </div>

          <div class="alert alert-danger text-center" *ngIf="addingUserError">
            <div class="card-block">
              <blockquote class="card-blockquote">
                <p>Hubo un error al agregar el usuario. Revise los datos e inténtelo nuevamente.</p>
              </blockquote>
            </div>
          </div>
          <button type="submit" class="btn btn-danger pull-right softies-color" [disabled]="formGroup.invalid">Agregar nuevo usuario</button>
        </form>
      </div>
    </div>
  </div>
</div>
